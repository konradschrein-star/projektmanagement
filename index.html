<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UPS Finalizer - A3 Summary Generator</title>
    <meta name="description" content="AI-powered A3 Management Summary Generator for Unified Problem Solving (UPS) Framework">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="main-title">
                    <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>
                    UPS Finalizer
                </h1>
                <p class="subtitle">A3 Summary Generator f√ºr Lean Management</p>
            </div>
            <button class="settings-btn" id="settingsBtn" aria-label="Einstellungen">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
            </button>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Input Section -->
            <section class="input-section">
                <div class="section-header">
                    <h2>Projekt-Daten eingeben</h2>
                    <p>Erfassen Sie alle Informationen aus dem UPS-Prozess</p>
                </div>

                <form id="upsForm" class="ups-form">
                    <!-- Header Information -->
                    <div class="form-step active" data-step="header">
                        <div class="step-header">
                            <div class="step-number">üìã</div>
                            <h3>Projekt-Informationen</h3>
                        </div>
                        <div class="form-group">
                            <label for="projectTitle">Projekttitel</label>
                            <input type="text" id="projectTitle" placeholder="z.B. Reduzierung der R√ºstzeit an Maschine X">
                        </div>
                        <div class="form-group">
                            <label for="teamName">Team / Gruppe</label>
                            <input type="text" id="teamName" placeholder="z.B. Gruppe 7">
                        </div>
                        <div class="form-group">
                            <label for="businessImpact">Business Impact (Quantitative Daten)</label>
                            <textarea id="businessImpact" rows="3" placeholder="z.B. Verlust: 15.000‚Ç¨/Jahr durch Maschinenstillstand, 120 Stunden Produktionsausfall pro Monat"></textarea>
                        </div>
                    </div>

                    <!-- Step 1: Problem Investigation -->
                    <div class="form-step" data-step="step1">
                        <div class="step-header">
                            <div class="step-number">1</div>
                            <h3>Problem Investigation</h3>
                        </div>
                        <div class="form-group">
                            <label for="largeVagueProblem">Large Vague Problem</label>
                            <textarea id="largeVagueProblem" rows="2" placeholder="Grobes Problem beschreiben"></textarea>
                        </div>
                        <div class="form-group">
                            <label>6W-2H Analyse</label>
                            <div class="subform-grid">
                                <div class="subform-item">
                                    <label for="what">Was?</label>
                                    <input type="text" id="what" placeholder="Welches Problem?">
                                </div>
                                <div class="subform-item">
                                    <label for="where">Wo? (ON THE FLOOR)</label>
                                    <input type="text" id="where" placeholder="Genauer physischer Ort">
                                </div>
                                <div class="subform-item">
                                    <label for="when">Wann?</label>
                                    <input type="text" id="when" placeholder="Zeitpunkt/Muster">
                                </div>
                                <div class="subform-item">
                                    <label for="who">Wer?</label>
                                    <input type="text" id="who" placeholder="Betroffene Personen">
                                </div>
                                <div class="subform-item">
                                    <label for="which">Welches Muster?</label>
                                    <input type="text" id="which" placeholder="Muster erkennen">
                                </div>
                                <div class="subform-item">
                                    <label for="how">Wie?</label>
                                    <input type="text" id="how" placeholder="Aktueller Prozess">
                                </div>
                                <div class="subform-item">
                                    <label for="howMuch">Wie viel?</label>
                                    <input type="text" id="howMuch" placeholder="Quantifizierung">
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="problemStatement">Problem Statement (Zusammenfassung)</label>
                            <textarea id="problemStatement" rows="3" placeholder="Pr√§gnantes Problem Statement basierend auf 6W-2H"></textarea>
                        </div>
                    </div>

                    <!-- Step 2: Root Cause Investigation -->
                    <div class="form-step" data-step="step2">
                        <div class="step-header">
                            <div class="step-number">2</div>
                            <h3>Root Cause Investigation</h3>
                        </div>
                        <div class="form-group">
                            <label>Ishikawa / Fishbone Kategorien</label>
                            <div class="subform-grid">
                                <div class="subform-item">
                                    <label for="ishikawaMensch">Mensch</label>
                                    <input type="text" id="ishikawaMensch" placeholder="M√∂gliche Ursachen">
                                </div>
                                <div class="subform-item">
                                    <label for="ishikawaMaschine">Maschine</label>
                                    <input type="text" id="ishikawaMaschine" placeholder="M√∂gliche Ursachen">
                                </div>
                                <div class="subform-item">
                                    <label for="ishikawaMethode">Methode</label>
                                    <input type="text" id="ishikawaMethode" placeholder="M√∂gliche Ursachen">
                                </div>
                                <div class="subform-item">
                                    <label for="ishikawaMaterial">Material</label>
                                    <input type="text" id="ishikawaMaterial" placeholder="M√∂gliche Ursachen">
                                </div>
                                <div class="subform-item">
                                    <label for="ishikawaUmgebung">Umgebung</label>
                                    <input type="text" id="ishikawaUmgebung" placeholder="M√∂gliche Ursachen">
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>5-Why Analyse</label>
                            <div class="why-chain">
                                <div class="why-item">
                                    <label for="why1">Why 1:</label>
                                    <input type="text" id="why1" placeholder="Warum tritt das Problem auf?">
                                </div>
                                <div class="why-arrow">‚Üì</div>
                                <div class="why-item">
                                    <label for="why2">Why 2:</label>
                                    <input type="text" id="why2" placeholder="Warum ist das so?">
                                </div>
                                <div class="why-arrow">‚Üì</div>
                                <div class="why-item">
                                    <label for="why3">Why 3:</label>
                                    <input type="text" id="why3" placeholder="Warum ist das so?">
                                </div>
                                <div class="why-arrow">‚Üì</div>
                                <div class="why-item">
                                    <label for="why4">Why 4:</label>
                                    <input type="text" id="why4" placeholder="Warum ist das so?">
                                </div>
                                <div class="why-arrow">‚Üì</div>
                                <div class="why-item">
                                    <label for="why5">Why 5:</label>
                                    <input type="text" id="why5" placeholder="Warum ist das so?">
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="rootCause">True Root Cause</label>
                            <textarea id="rootCause" rows="2" placeholder="Die eigentliche Grundursache"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="verification">Verifikation / Scientific Proof</label>
                            <textarea id="verification" rows="2" placeholder="Wie wurde die Ursache nachgewiesen?"></textarea>
                        </div>
                    </div>

                    <!-- Step 3: Implement Actions -->
                    <div class="form-step" data-step="step3">
                        <div class="step-header">
                            <div class="step-number">3</div>
                            <h3>Implement Actions</h3>
                        </div>
                        <div class="form-group">
                            <label>Countermeasures (Gegenma√ünahmen)</label>
                            <div id="countermeasuresList" class="countermeasures-list">
                                <!-- Dynamic countermeasures will be added here -->
                            </div>
                            <button type="button" class="add-btn" id="addCountermeasure">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                                </svg>
                                Ma√ünahme hinzuf√ºgen
                            </button>
                        </div>
                    </div>

                    <!-- Step 4: Sustain Results -->
                    <div class="form-step" data-step="step4">
                        <div class="step-header">
                            <div class="step-number">4</div>
                            <h3>Sustain Results</h3>
                        </div>
                        <div class="form-group">
                            <label for="validationResult">Validierungsergebnis</label>
                            <div class="radio-group">
                                <label class="radio-label">
                                    <input type="radio" name="validation" value="success" id="validationSuccess">
                                    <span class="radio-custom"></span>
                                    Problem gel√∂st (ON)
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="validation" value="partial" id="validationPartial">
                                    <span class="radio-custom"></span>
                                    Teilweise gel√∂st
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="validation" value="failed" id="validationFailed">
                                    <span class="radio-custom"></span>
                                    Nicht gel√∂st (OFF)
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="beforeAfter">Vorher/Nachher Vergleich</label>
                            <textarea id="beforeAfter" rows="3" placeholder="Quantitative Daten zum Vergleich"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="standardization">Standardisierungsmethode</label>
                            <select id="standardization">
                                <option value="">Bitte w√§hlen...</option>
                                <option value="OPL">OPL - One Point Lesson</option>
                                <option value="SOP">SOP - Standard Operating Procedure</option>
                                <option value="Training">Training / Schulung</option>
                                <option value="Visual">Visual Management</option>
                                <option value="Checklist">Checkliste</option>
                                <option value="Other">Andere</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="followUp">Follow-up Ma√ünahmen</label>
                            <textarea id="followUp" rows="2" placeholder="Was bleibt noch zu tun?"></textarea>
                        </div>
                    </div>

                    <!-- Step 5: Reapplication -->
                    <div class="form-step" data-step="step5">
                        <div class="step-header">
                            <div class="step-number">5</div>
                            <h3>Reapplication</h3>
                        </div>
                        <div class="form-group">
                            <label>Reapplication Areas</label>
                            <div id="reapplicationList" class="reapplication-list">
                                <!-- Dynamic reapplication areas will be added here -->
                            </div>
                            <button type="button" class="add-btn" id="addReapplication">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                                </svg>
                                Bereich hinzuf√ºgen
                            </button>
                        </div>
                    </div>

                    <!-- Navigation Buttons -->
                    <div class="form-navigation">
                        <button type="button" class="nav-btn prev-btn" id="prevBtn" disabled>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                            </svg>
                            Zur√ºck
                        </button>
                        <div class="step-indicator" id="stepIndicator">
                            <span class="step-dot active"></span>
                            <span class="step-dot"></span>
                            <span class="step-dot"></span>
                            <span class="step-dot"></span>
                            <span class="step-dot"></span>
                            <span class="step-dot"></span>
                        </div>
                        <button type="button" class="nav-btn next-btn" id="nextBtn">
                            Weiter
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                            </svg>
                        </button>
                    </div>

                    <!-- Generate Button -->
                    <div class="generate-section">
                        <button type="button" class="generate-btn" id="generateBtn">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                            </svg>
                            A3 Summary generieren
                        </button>
                    </div>
                </form>
            </section>

            <!-- Output Section -->
            <section class="output-section" id="outputSection" style="display: none;">
                <div class="section-header">
                    <h2>Generiertes A3 Summary</h2>
                    <div class="output-actions">
                        <button class="action-btn" id="copyBtn" title="In Zwischenablage kopieren">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                            </svg>
                        </button>
                        <button class="action-btn" id="downloadBtn" title="Als Markdown herunterladen">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                            </svg>
                        </button>
                        <button class="action-btn" id="printBtn" title="Drucken">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" />
                            </svg>
                        </button>
                        <button class="action-btn" id="newBtn" title="Neues Projekt">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="output-content" id="outputContent">
                    <!-- Generated markdown will be rendered here -->
                </div>
            </section>

            <!-- Loading State -->
            <div class="loading-overlay" id="loadingOverlay" style="display: none;">
                <div class="loading-spinner">
                    <div class="spinner"></div>
                    <p>A3 Summary wird generiert...</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Einstellungen</h3>
                <button class="close-btn" id="closeSettings">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="apiKey">Gemini API Key</label>
                    <input type="password" id="apiKey" placeholder="Eigenen API Key eingeben (optional)">
                    <small>Wenn leer, wird ein begrenzter Demo-Key verwendet. Ihr Key wird nur im Browser gespeichert.</small>
                </div>
                <div class="form-group">
                    <button type="button" class="secondary-btn" id="clearDataBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                        </svg>
                        Alle Daten l√∂schen
                    </button>
                    <small>L√∂scht gespeicherte API Keys und Formulardaten</small>
                </div>
            </div>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="app.js"></script>
</body>
</html>
